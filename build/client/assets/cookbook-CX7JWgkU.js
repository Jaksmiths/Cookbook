import{p as e,a as i,w as x}from"./chunk-UH6JLGW7-2ts3TPiB.js";const v=({recipe:t})=>e.jsxs("div",{children:[e.jsx("div",{children:t.name}),e.jsxs("div",{children:["Serving Size: ",t.serv," ",t.servUnit]}),e.jsxs("div",{children:["Total Time: ",t.time," ",t.timeUnit]})]}),j=({recipes:t,fetchData:u,error:c,loading:l})=>{const[f,d]=i.useState(0),s=i.useRef(null);return i.useEffect(()=>{const r=new IntersectionObserver(n=>{n[0].isIntersecting&&d(o=>{const a=o+1;return u(a),a})},{threshold:1});return s.current&&r.observe(s.current),()=>{s.current&&r.unobserve(s.current)}},[s]),e.jsxs(e.Fragment,{children:[e.jsx("div",{children:t.map(r=>e.jsx(v,{recipe:r},r.id))}),e.jsx("div",{ref:s}),l&&e.jsx("p",{children:"Loading..."}),c&&e.jsxs("p",{children:["Error: ",c.message]})]})},b=x(function(){const[u,c]=i.useState(!0),[l,f]=i.useState([]),[d,s]=i.useState(null),r=async n=>{try{c(!0);const o=await fetch(`http://localhost:9000/cookbook/?limit=10&skip=${(n-1)*10}`),a=await o.json();o.ok&&f(h=>[...h,...a.rec]),console.log(`fetch &skip=${(n-1)*10}`),c(!1)}catch(o){c(!1),o instanceof Error&&s(o)}};return i.useEffect(()=>{let n=!0;return(async()=>n&&await r(1))(),()=>{n=!1}},[]),e.jsx("div",{children:e.jsx(j,{recipes:l,fetchData:r,loading:u,error:d})})});export{b as default};
